<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Try by typesafely</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Try</h1>
        <h2>Implementation of the Try-Success-Failure Scala API for Java 8</h2>
        <a href="https://github.com/typesafely/try" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="scalas-try-success-failure-for-java-8" class="anchor" href="#scalas-try-success-failure-for-java-8"><span class="octicon octicon-link"></span></a>Scala's Try-Success-Failure for Java 8</h1>

<p>This API is a Java 8 implementation of <a href="http://www.scala-lang.org/api/current/#scala.util.Try">Scala Try API</a>,
originally implemented by the guys at <a href="https://twitter.com/">Twitter</a> and later added to the Scala Standard Library.</p>

<p>The <code>Try</code> type represents a computation that may fail. If the computation is successful returns
the value wrapped in a <code>Try.Success</code> otherwise returns the
<code>java.lang.Exception</code> wrapped in a <code>Try.Failure</code>.</p>

<p>To use <code>Try</code> you need to call the <code>Try.apply(FailableSupplier)</code> method passing in a lambda with
the same signature used for a common <code>java.util.function.Supplier</code>.
Indeed <code>FailableSupplier</code> is just a <code>java.util.function.Supplier</code> with a
<code>throws Exception</code> added to its <code>get</code> method.</p>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<h3>
<a name="read-a-file-line-by-line" class="anchor" href="#read-a-file-line-by-line"><span class="octicon octicon-link"></span></a>Read a file line by line</h3>

<p>As a first example consider the code you need to implement a method to read a file line by line in Java 8. 
Using the traditional <code>try-catch</code> block you would implement it as follows:</p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">readFile</span><span class="o">(</span><span class="n">String</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lines</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">readAllLines</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">file</span><span class="o">).</span><span class="na">toPath</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"Could not read the file: "</span> <span class="o">+</span> <span class="n">file</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">lines</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p><code>readFile</code> reads the content of a file, line by line, into a <code>List&lt;String&gt;</code>. In case of exception the method
returns a <code>List&lt;String&gt;</code> with just one line: <em>"Could not read..."</em>. </p>

<p>However, using the <code>Try</code> API the previous method becomes:</p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">readFile</span><span class="o">(</span><span class="n">String</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">return</span> <span class="n">Try</span><span class="o">.</span><span class="na">apply</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">Files</span><span class="o">.</span><span class="na">readAllLines</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">file</span><span class="o">).</span><span class="na">toPath</span><span class="o">()))</span>
            <span class="o">.</span><span class="na">getOrElse</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"Could not read the file: "</span> <span class="o">+</span> <span class="n">file</span><span class="o">));</span>

<span class="o">}</span>
</pre></div>

<p>Which version do you like more? :-)</p>

<h3>
<a name="integer-division" class="anchor" href="#integer-division"><span class="octicon octicon-link"></span></a>Integer division</h3>

<p>As another example, <code>Try</code> can be used to perform division on a user-defined input, without the need to do explicit
exception-handling in all of the places that an exception might occur:</p>

<div class="highlight highlight-java"><pre><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Integer division"</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter the dividend press Return and then enter the divisor: "</span><span class="o">);</span>
<span class="n">Scanner</span> <span class="n">dividend</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Scanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
<span class="n">Scanner</span> <span class="n">divisor</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Scanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>

<span class="n">Try</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">num</span> <span class="o">=</span> <span class="n">Try</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="nl">dividend:</span><span class="o">:</span><span class="n">nextInt</span><span class="o">);</span>
<span class="n">Try</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">denom</span> <span class="o">=</span> <span class="n">Try</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="nl">divisor:</span><span class="o">:</span><span class="n">nextInt</span><span class="o">);</span>

<span class="n">Try</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">denom</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">y</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">));</span>
<span class="n">Try</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">resultTryStr</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="s">"The result of division is: "</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
<span class="n">String</span> <span class="n">resultStr</span> <span class="o">=</span> <span class="n">resultTryStr</span><span class="o">.</span><span class="na">getOrElse</span><span class="o">(</span><span class="s">"The integers you entered are not valid or the divisor is zero."</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">resultStr</span><span class="o">);</span>
</pre></div>

<p>In this case if you enter two valid integers with the second one--the divisor--being different from zero
then the code prints out <code>The result of division is: $RESULT</code>, where <code>$RESULT</code> is the division between the first
and the second number. On the other hand, if you either enter non valid integers--such as a string--or the second
number is zero then you'll get the message <code>The integers you entered are not valid or the divisor is zero.</code>
printed out.</p>

<p>An important property of <code>Try</code> shown in the previous code snippet is its ability
to <em>pipeline</em> (<em>chain</em> if you prefer)  operations, catching exceptions along the way thanks to its <code>flatMap</code> method.
If you are not a seasoned functional programming geek concepts such as <code>flatMap/map</code> might not be easy to grasp
at first. However you'll get used to them and, in the end, you'll love them. Moreover you're going to encounter
these methods more and more often since some important Java 8 classes already implement them
(e.g. <code>java.util.Optional</code> and <code>java.util.stream.Stream</code>. Anyway for the moment just take for
granted that to pipeline more than two operations, say N, you just need to chain them by using N - 1
<code>flatMap</code> calls and a last call to <code>map</code> (see the <strong>Integer sum</strong> example).</p>

<h3>
<a name="integer-sum" class="anchor" href="#integer-sum"><span class="octicon octicon-link"></span></a>Integer sum</h3>

<p>Suppose you have 3 variables (x, y and z) being
of type <code>Try&lt;Integer&gt;</code> and you just want to sum them up. The code you need for doing that is the
following:</p>

<div class="highlight highlight-java"><pre><span class="n">x</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="n">z</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">c</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">)))</span>
</pre></div>

<p>Apart from the methods seen in these examples, such as <code>map</code>, <code>flatMap</code> and <code>getOrElse</code>, <code>Try</code> has many other useful methods. See the <code>TryTest</code>
class for a thorough coverage of all methods.</p>

<h2>
<a name="javadoc" class="anchor" href="#javadoc"><span class="octicon octicon-link"></span></a>Javadoc</h2>

<p><a href="http://typesafely.github.io/try/apidocs/">API documentation</a> for this project.</p>

<h2>
<a name="build" class="anchor" href="#build"><span class="octicon octicon-link"></span></a>Build</h2>

<p>To build:</p>

<pre><code>$ git clone https://github.com/typesafely/try.git
$ cd try
$ mvn package
</code></pre>

<p>You'll find the <code>jar</code> under the usual <code>target</code> directory.</p>

<h2>
<a name="bugs-and-feedback" class="anchor" href="#bugs-and-feedback"><span class="octicon octicon-link"></span></a>Bugs and Feedback</h2>

<p>For bugs, questions and discussions please use the <a href="https://github.com/typesafely/try/issues">Github Issues</a>.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/typesafely/try/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/typesafely/try/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/typesafely/try"></a> is maintained by <a href="https://github.com/typesafely">typesafely</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>